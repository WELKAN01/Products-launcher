# üöÄ Gu√≠a de Despliegue con Docker Compose y Git Submodules

Esta gu√≠a describe paso a paso c√≥mo **desplegar el aplicativo usando Docker Compose** y c√≥mo **trabajar correctamente con Git Submodules**, de forma clara y ordenada.

---

## üê≥ Despliegue del aplicativo con Docker Compose

### 1Ô∏è‚É£ Crear y configurar el archivo `.env`

- Copia el archivo de ejemplo:

```bash
cp .env.example .env
```

- Ajusta las variables necesarias seg√∫n tu entorno.

---

### 2Ô∏è‚É£ Construir y levantar los servicios

```bash
docker-compose up -d --build
```

Esto:

- Construye las im√°genes
- Levanta los contenedores en segundo plano (`-d`)

---

### 3Ô∏è‚É£ Verificar que la aplicaci√≥n est√° corriendo

Abre tu navegador y accede a:

üëâ **http\://localhost:3000**

---

### 4Ô∏è‚É£ Logs y administraci√≥n b√°sica

- üìú Ver logs:

  ```bash
  docker-compose logs
  ```

- ‚õî Detener servicios:

  ```bash
  docker-compose down
  ```

- üîÑ Reiniciar servicios:

  ```bash
  docker-compose restart
  ```

---

### 5Ô∏è‚É£ Eliminar y levantar nuevamente los servicios

- Eliminar contenedores, vol√∫menes y redes:

```bash
docker-compose down -v
```

- Volver a construir y levantar:

```bash
docker-compose up -d --build
```

---

## üîó Pasos para crear y usar Git Submodules

### 1Ô∏è‚É£ Crear un nuevo repositorio en GitHub

Crea el repositorio que ser√° usado como sub-m√≥dulo.

---

### 2Ô∏è‚É£ Clonar el repositorio principal

```bash
git clone <url-repositorio-principal>
```

---

### 3Ô∏è‚É£ A√±adir el sub-m√≥dulo

> ‚ö†Ô∏è La carpeta destino **no debe existir** previamente.

```bash
git submodule add <repository_url> <directory_name>
```

---

### 4Ô∏è‚É£ Guardar los cambios

```bash
git add .
git commit -m "Add submodule"
git push
```

---

### 5Ô∏è‚É£ Inicializar y actualizar sub-m√≥dulos

Cuando alguien clona el repositorio por primera vez:

```bash
git submodule update --init --recursive
```

---

### 6Ô∏è‚É£ Actualizar las referencias del sub-m√≥dulo

```bash
git submodule update --remote
```

---

## ‚ö†Ô∏è Importante

Si trabajas en un repositorio que **contiene sub-m√≥dulos**:

1. **Primero** haz `commit` y `push` en el sub-m√≥dulo
2. **Despu√©s** haz `commit` y `push` en el repositorio principal

‚ùó Si se hace al rev√©s, se perder√°n las referencias y se generar√°n conflictos.

---

## ‚úÖ Resumen r√°pido de comandos Docker Compose

| Situaci√≥n                                | Comando recomendado                                    |
| ---------------------------------------- | ------------------------------------------------------ |
| Cambi√© solo c√≥digo (`src`)               | `docker compose up`                                    |
| Cambi√© dependencias o Dockerfile (uno)   | `docker compose build <servicio> && docker compose up` |
| Cambi√© dependencias o Dockerfile (todos) | `docker compose up --build`                            |
| Contenedor falla pero imagen est√° bien   | `docker compose up --force-recreate`                   |
| Parar todos los servicios                | `docker compose down`                                  |
| Parar todo y borrar vol√∫menes            | `docker compose down -v`                               |
| Ver logs de un servicio espec√≠fico       | `docker compose logs -f <servicio>`                    |

---

‚ú® **Tip:** Mant√©n esta gu√≠a en el repositorio como `README.md` o `DEPLOY.md` para facilitar el onboarding del equipo.

<<<<<<< HEAD
| Situaci√≥n                                   | Comando recomendado                           |
|--------------------------------------------|----------------------------------------------|
| Cambi√© solo c√≥digo (src)                   | `docker compose up`                          |
| Cambi√© dependencias o Dockerfile de uno    | `docker compose build <servicio> && docker compose up` |
| Cambi√© dependencias o Dockerfile de todos  | `docker compose up --build`                  |
| Contenedor fallando pero imagen ok         | `docker compose up --force-recreate`         |
| Parar todo                                 | `docker compose down`                        |
| Parar todo y borrar vol√∫menes              | `docker compose down -v`                     |
| Ver logs de un servicio                    | `docker compose logs -f <servicio>`          |

## Desplegar docker compose para desplegar producci√≥n

### Comandos para desplegar en producci√≥n

1. **Construir y levantar los servicios con Docker Compose (Producci√≥n)**
   ```bash
   docker-compose -f docker-compose.prod.yml up -d --build
   ```

2. **Construir las im√°genes de forma expl√≠cita**
   ```bash
   docker-compose -f docker-compose.prod.yml build
   ```

3. **Levantar los servicios sin reconstruir**
   ```bash
   docker-compose -f docker-compose.prod.yml up -d
   ```

4. **Ver logs de todos los servicios en producci√≥n**
   ```bash
   docker-compose -f docker-compose.prod.yml logs -f
   ```

5. **Ver logs de un servicio espec√≠fico**
   ```bash
   docker-compose -f docker-compose.prod.yml logs -f <nombre_del_servicio>
   ```

6. **Detener todos los servicios en producci√≥n**
   ```bash
   docker-compose -f docker-compose.prod.yml down
   ```

7. **Detener y eliminar vol√∫menes en producci√≥n**
   ```bash
   docker-compose -f docker-compose.prod.yml down -v
   ```

8. **Reiniciar servicios espec√≠ficos**
   ```bash
   docker-compose -f docker-compose.prod.yml restart <nombre_del_servicio>
   ```

9. **Actualizar un servicio espec√≠fico**
   ```bash
   docker-compose -f docker-compose.prod.yml build <nombre_del_servicio> && docker-compose -f docker-compose.prod.yml up -d
   ```

10. **Ver el estado de todos los contenedores**
    ```bash
    docker-compose -f docker-compose.prod.yml ps
    ```

=======
>>>>>>> b277b46d7b1f5a2a0fbd18ce3035347cae2412d5
